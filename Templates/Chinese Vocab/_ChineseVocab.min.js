function playBoth(){const e=document.querySelector("#male .soundLink, #male .replaybutton"),n=document.querySelector("#female .soundLink, #female .replaybutton");0===Math.round(Math.random())?(e&&e.click(),n&&setTimeout((()=>{n.click()}),1e3)):(n&&n.click(),e&&setTimeout((()=>{e.click()}),1e3))}function getNum(){const e=document.getElementById("firstHint");if(e.innerText.startsWith("#")){const n=document.getElementById("simplified").textContent.trim().length;e.innerText=e.innerText.replace("#",n);const t=/\((s)\)/g;e.innerText=n>1?e.innerText.replace(t,"$1"):e.innerText.replace(t,"")}else e.style.display="none",document.getElementById("hintPinyin").style.display="inline"}function detectAnkiPlatform(){return window.anki&&window.webkit&&window.webkit.messageHandlers&&void 0!==window.webkit.messageHandlers.cb?"AnkiMobile":document.querySelector("span.align-middle")&&document.querySelector("span.align-middle").textContent.includes("AnkiWeb")?"AnkiWeb":"undefined"!=typeof AnkiDroidJS?"AnkiDroid":"undefined"!=typeof pycmd?"AnkiDesktop":"Unknown"}function randomFont(){const e={"zh-cmn-Hans-CN":["HanziPen SC","Heiti SC","Kaiti SC","Libian SC","LingWai SC","Xingkai SC"],"zh-cmn-Hant-TW":["HanziPen TC","Heiti TC","Kaiti TC","Libian TC","LingWai TC","Xingkai TC"]},n=Math.floor(Math.random()*e["zh-cmn-Hans-CN"].length),t=document.getElementById("conditionalContent").children,i=new RegExp(`${Object.keys(e).join("|")}`,"i");for(w of t)if(i.test(w.lang)){let t=e[w.lang][n];w.setAttribute("style",`font-family:${t};`)}}function formatCard(){const e=document.getElementById("simplified").textContent.trim(),n=document.getElementById("traditional").textContent.trim(),t=document.getElementById("pinyin").textContent.trim(),i=document.getElementsByTagName("blockquote"),o=i.length,l=document.getElementById("cardType").textContent.trim(),d=document.getElementById("answer"),a=detectAnkiPlatform();function s(){const t=document.getElementById("trad");t&&e!==n&&t.classList.toggle("hide")}function c(){if(o>0){const o="AnkiMobile"===a?new RegExp(`(?:<b(?:.*[^>])?>)?(\\s?${e}|${n}|${t}\\s?)(?:</b>)?`,"gi"):new RegExp(`(?:<b>)?(\\s?${e}|${n}|${t}\\s?)(?:</b>)?`,"gi");for(const e of i)0===e.getElementsByClassName("keyword").length&&(e.innerHTML=e.innerHTML.replace(o,'<span class="keyword">$1</span>'))}}switch(l){case"Test Pinyin":if(s(),c(),d){const e=document.getElementById("example0");e.classList.remove("only-hanzi"),e.firstElementChild.style.display="none",e.lastElementChild.style.display="block"}break;case"Test Hanzi":d&&(s(),c(),document.getElementById("firstHint").style.display="none",document.getElementById("hintPinyin").style.display="inline",document.getElementById("example0").classList.remove("hide-bq"));break;case"Test Meaning":s(),c(),d?(document.querySelector("div.pinyin > a.hint").style.display="none",document.querySelector("div.pinyin > div.hint").style.display="inline",document.getElementById("example0").style.display="none"):function(){if(o>0){const e=document.getElementById("example0");for(let n of i)e.append(n)}}();break;default:s(),c()}}"loading"===document.readyState?document.addEventListener("DOMContentLoaded",formatCard):formatCard();
