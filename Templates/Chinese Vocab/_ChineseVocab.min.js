function playBoth(){const e=document.querySelector("#male .soundLink, #male .replaybutton"),t=document.querySelector("#female .soundLink, #female .replaybutton");e.click(),setTimeout((()=>{t.click()}),1e3)}function getNum(){const e=document.getElementById("firstHint");if(e.innerText.startsWith("#")){const t=document.getElementById("simplified").textContent.trim().length;e.innerText=e.innerText.replace("#",t);const n=/\((s)\)/g;e.innerText=t>1?e.innerText.replace(n,"$1"):e.innerText.replace(n,"")}else e.style.display="none",document.getElementById("hintPinyin").style.display="inline"}function detectAnkiPlatform(){return window.anki&&window.webkit&&window.webkit.messageHandlers&&void 0!==window.webkit.messageHandlers.cb?"AnkiMobile":document.querySelector("span.align-middle")&&document.querySelector("span.align-middle").textContent.includes("AnkiWeb")?"AnkiWeb":"undefined"!=typeof AnkiDroidJS?"AnkiDroid":"undefined"!=typeof pycmd?"AnkiDesktop":"Unknown"}function formatCard(){const e=document.getElementById("simplified").textContent.trim(),t=document.getElementById("traditional").textContent.trim(),n=document.getElementById("pinyin").textContent.trim(),i=document.getElementsByTagName("blockquote");function o(){const n=document.getElementById("trad");n&&e===t&&n.remove()}function d(){if(i.length>0){const o="AnkiMobile"===detectAnkiPlatform()?new RegExp(`(?:<b(?:.*[^>])?>)?(\\s?${e}|${t}|${n}\\s?)(?:</b>)?`,"gi"):new RegExp(`(?:<b>)?(\\s?${e}|${t}|${n}\\s?)(?:</b>)?`,"gi");for(const e of i)e.innerHTML=e.innerHTML.replace(o,'<span class="keyword">$1</span>')}}const l=document.getElementById("cardType").textContent.trim(),s=document.getElementById("answer");switch(l){case"Test Pinyin":if(o(),d(),s){const e=document.getElementById("example0");e.classList.remove("only-hanzi"),e.firstElementChild.style.display="none",e.lastElementChild.style.display="block"}break;case"Test Hanzi":s&&(o(),d(),document.getElementById("firstHint").style.display="none",document.getElementById("hintPinyin").style.display="inline",document.getElementById("example0").classList.remove("hide-bq"));break;case"Test Meaning":o(),d(),s?(document.querySelector("div.pinyin > a.hint").style.display="none",document.querySelector("div.pinyin > div.hint").style.display="inline",document.getElementById("example0").style.display="none"):function a(){if(i.length>0){const e=document.getElementById("example0");for(let t of i)e.append(t)}}();break;default:o(),d(),playBoth()}s&&playBoth()}"loading"===document.readyState?document.addEventListener("DOMContentLoaded",formatCard):formatCard();
